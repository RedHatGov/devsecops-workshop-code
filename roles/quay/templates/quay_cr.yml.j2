apiVersion: redhatcop.redhat.io/v1alpha1
kind: QuayEcosystem
metadata:
  name: quayecosystem
  namespace: quay-enterprise
spec:
  clair:
    enabled: false
  quay:
{% if enable_quay_repo_mirroring|bool %}
    enableRepoMirroring: true
{% endif %}
    externalAccess:
      hostname: {{ quay_route }}
{% if (use_real_certs|default(true)) %}
      tls:
        secretName: quay-tls-certs
        termination: passthrough
{% endif %}
    imagePullSecretName: dummy-pull-secret
    superuserCredentialsSecretName: quay-superuser
    database:
      image: registry.redhat.io/rhscl/postgresql-96-rhel7
      volumeSize: 10Gi
    registryStorage:
      persistentVolumeSize: 10Gi
{% if not (deploy_ocs|default(true)) %}
      persistentVolumeAccessModes:
        - ReadWriteOnce
{% endif %}

  redis:
    image: 'registry.redhat.io/rhscl/redis-32-rhel7:latest'
    
